/*
 * This is the script which is to used for UART test bench.
 */

menuitem "UART Test Bench"

/***************************************************************************
 **************************** GEL Definitions ******************************
 ***************************************************************************/

/* R4 XMODEM TEST IMAGE: */
#define R4_XMODEM_TEST_IMAGE                    "C:\\git\\mmwave_boot_test\\r4_tb\\r4_tb.xer4"

#define R5_SBL_SIZE_WORDS						819
#define R5_SBL_IMAGE_SIZE						R5_SBL_SIZE_WORDS * 4
#define R5_SBL_IMAGE							"C:\\git\\mmwave_boot_test\\ti\sbl\\tpr12\\r5_sbl_tpr12_cert_dkey_se.dat"

#define Load_MEM_Word(addr, data)			    *(unsigned int*)(addr) = (unsigned int)(data)

hotmenu Load_UartTestBench()
{
    /*----------------------------------------------------------------------
     * Step1: Connect to the R4 Core(test bench):
     ----------------------------------------------------------------------*/
    if (GEL_IsConnected() == 0)
    {
        GEL_TextOut("Connecting to the R4 Core...\n");
        GEL_Connect();
    }
	
    /*----------------------------------------------------------------------
     * Step2: Load the R4 x-modem Test Bench Code:
     ----------------------------------------------------------------------*/
    GEL_TextOut("Loading the R4 X-modem test bench Image: %s\n",,,,,R4_XMODEM_TEST_IMAGE);
    GEL_Load(R4_XMODEM_TEST_IMAGE);
    GEL_TextOut("Loading complete.\n");	
	
    /*----------------------------------------------------------------------
     * Step3: Load SBL size
     ----------------------------------------------------------------------*/	
	Load_MEM_Word(0x8004000, R5_SBL_IMAGE_SIZE);
	
    /*----------------------------------------------------------------------
     * Step4: Load SBL
     ----------------------------------------------------------------------*/	
	GEL_MemoryLoadData(0x8004004,0,R5_SBL_SIZE_WORDS, R5_SBL_IMAGE);	
	
    /*----------------------------------------------------------------------
     * Step5: Reset
     ----------------------------------------------------------------------*/
    GEL_Reset();
    GEL_TextOut("Reset complete.\n");	
}

